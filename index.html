<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Form Hitung Gorden</title>
  <style>
    /* Base Styles */
    * {
      box-sizing: border-box;
    }
    
    body {
      font-family: Arial, sans-serif;
      background: #f9f9f9;
      margin: 0;
      padding: 20px;
    }
    
    .container {
      max-width: 1200px;
      margin: auto;
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    
    h2 {
      text-align: center;
      margin-top: 0;
    }
    
    /* Form Group Styles */
    .form-group {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 15px;
      margin-bottom: 20px;
    }
    
    .form-group label {
      display: flex;
      flex-direction: column;
      font-weight: bold;
    }
    
    input, textarea, select {
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      margin-top: 5px;
      width: 100%;
    }
    
    textarea {
      min-height: 80px;
      resize: vertical;
    }
    
    /* Button Styles */
    .button-container {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin: 20px 0;
    }
    
    button {
      padding: 12px 20px;
      background: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      flex: 1 1 200px;
      font-weight: bold;
    }
    
    button:hover {
      background: #0056b3;
    }
    
    /* Table Styles - Desktop */
    .responsive-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
      overflow-x: auto;
      display: block;
    }
    
    .responsive-table th, 
    .responsive-table td {
      border: 1px solid #ddd;
      padding: 12px;
      text-align: center;
      white-space: nowrap;
    }
    
    .responsive-table th {
      background-color: #f0f0f0;
      position: sticky;
      top: 0;
    }
    
    .responsive-table input,
    .responsive-table select {
      width: 100%;
      min-width: 80px;
      padding: 8px;
    }
    
    /* Mobile View */
    @media (max-width: 768px) {
      .responsive-table {
        display: block;
      }
      
      .responsive-table thead {
        display: none;
      }
      
      .responsive-table tr {
        display: flex;
        flex-direction: column;
        border: 1px solid #ddd;
        margin-bottom: 15px;
        border-radius: 8px;
        overflow: hidden;
      }
      
      .responsive-table td {
        display: flex;
        text-align: left;
        padding: 10px;
        border: none;
        border-bottom: 1px solid #eee;
        width: 100%;
      }
      
      .responsive-table td:last-child {
        border-bottom: none;
      }
      
      .responsive-table td::before {
        content: attr(data-label);
        font-weight: bold;
        width: 40%;
        min-width: 120px;
        display: inline-block;
      }
      
      .button-container {
        flex-direction: column;
      }
      
      button {
        width: 100%;
      }
    }
    
    /* Preview Modal */
    #preview-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.8);
      overflow: auto;
      z-index: 1000;
    }
    
    .modal-content {
      background: white;
      margin: 50px auto;
      padding: 20px;
      max-width: 95%;
      border-radius: 8px;
      position: relative;
    }
    
    .close-btn {
      position: absolute;
      top: 15px;
      right: 15px;
      background: #dc3545;
    }
    
    /* Print Styles */
    @media print {
      body * {
        visibility: hidden;
      }
      #preview-modal, 
      #preview-modal * {
        visibility: visible;
      }
      #preview-modal {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: auto;
        background: white;
      }
      .close-btn {
        display: none;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Form Penghitungan Gorden</h2>
    
    <div class="form-group">
      <label>Nama Customer: <input type="text" id="nama"></label>
      <label>Alamat: <textarea id="alamat"></textarea></label>
      <label>No HP: <input type="text" id="hp"></label>
      <label>Tanggal & Waktu Pengukuran: <input type="datetime-local" id="pengukuran"></label>
      <label>Tanggal & Waktu Pekerjaan: <input type="datetime-local" id="waktu"></label>
    </div>
    
    <table class="responsive-table" id="tabel-gorden">
      <thead>
        <tr>
          <th>Nama Ruangan</th>
          <th>Lebar</th>
          <th>Tinggi</th>
          <th>Jumlah Jendela</th>
          <th>Bahan Tebal (m)</th>
          <th>Deskripsi Tebal</th>
          <th>Bahan Tipis (m)</th>
          <th>Deskripsi Tipis</th>
          <th>Rail (m)</th>
          <th>Ring</th>
        </tr>
      </thead>
      <tbody id="body-tabel">
        <tr>
          <td data-label="Nama Ruangan"><input type="text"></td>
          <td data-label="Lebar"><input type="number" onchange="hitungOtomatis(this)"></td>
          <td data-label="Tinggi"><input type="number" onchange="hitungOtomatis(this)"></td>
          <td data-label="Jumlah Jendela"><input type="number" onchange="hitungOtomatis(this)"></td>
          <td data-label="Bahan Tebal (m)"><input type="text" readonly></td>
          <td data-label="Deskripsi Tebal">
            <select onchange="hitungOtomatis(this)">
              <!-- options unchanged -->
            </select>
          </td>
          <td data-label="Bahan Tipis (m)"><input type="text" readonly></td>
          <td data-label="Deskripsi Tipis">
            <select onchange="hitungOtomatis(this)">
              <!-- options unchanged -->
            </select>
          </td>
          <td data-label="Rail (m)"><input type="text" readonly></td>
          <td data-label="Ring"><input type="text" readonly></td>
        </tr>
      </tbody>
    </table>
    
    <div class="button-container">
      <button onclick="tambahBaris()">Tambah Baris</button>
      <button onclick="simpanData()">Simpan</button>
      <button onclick="window.print()">Cetak</button>
      <button onclick="previewData()">Preview</button>
    </div>
    
    <div id="preview-modal">
      <div class="modal-content">
        <h3>Preview Data</h3>
        <div class="table-container">
          <table class="responsive-table" id="preview-table">
            <!-- Preview table content generated dynamically -->
          </table>
        </div>
        <button class="close-btn" onclick="document.getElementById('preview-modal').style.display='none'">Tutup</button>
      </div>
    </div>
  </div>

  <script>
    // Add data labels for mobile view
    function setDataLabels() {
      const headers = document.querySelectorAll('#tabel-gorden thead th');
      document.querySelectorAll('#tabel-gorden tbody tr').forEach(row => {
        const cells = row.querySelectorAll('td');
        cells.forEach((cell, i) => {
          if (headers[i]) {
            cell.setAttribute('data-label', headers[i].textContent);
          }
        });
      });
    }

    // Initialize on load
    document.addEventListener('DOMContentLoaded', setDataLabels);

    function tambahBaris() {
      const tbody = document.getElementById('body-tabel');
      const newRow = tbody.querySelector('tr').cloneNode(true);
      newRow.querySelectorAll('input, select').forEach(el => el.value = '');
      tbody.appendChild(newRow);
      setDataLabels(); // Update data labels for new row
    }

    // Other functions remain unchanged (hitungOtomatis, pembulatanKhusus, rumusHitung, simpanData, previewData)
    // ... [Existing JavaScript functions] ...

    function previewData() {
      const previewTable = document.getElementById('preview-table');
      previewTable.innerHTML = `
        <thead>
          <tr>
            <th>No</th>
            <th>Nama Ruangan</th>
            <th>Lebar</th>
            <th>Tinggi</th>
            <th>Jumlah</th>
            <th>Bahan Tebal</th>
            <th>Deskripsi Tebal</th>
            <th>Bahan Tipis</th>
            <th>Deskripsi Tipis</th>
            <th>Rail</th>
            <th>Ring</th>
          </tr>
        </thead>
        <tbody id="preview-table-body"></tbody>
      `;
      
      // ... [Existing previewData code to populate table] ...
      
      // Add data labels to preview table
      const previewHeaders = previewTable.querySelectorAll('thead th');
      document.querySelectorAll('#preview-table-body tr').forEach(row => {
        const cells = row.querySelectorAll('td');
        cells.forEach((cell, i) => {
          if (previewHeaders[i]) {
            cell.setAttribute('data-label', previewHeaders[i].textContent);
          }
        });
      });
      
      document.getElementById('preview-modal').style.display = 'block';
    }
  </script>
</body>
</html>
